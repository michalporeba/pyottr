# A Python version of stOTTR

Any data, especially open data, is better served in a triple form. 

But a lot of it is locked in tabular format: relational databases, CSV files and so on. The [stOTTR - Terse Syntax for Reasonable Ontology Templates](https://dev.spec.ottr.xyz/stOTTR/) tries to help with this problem. 
It provides a method of tranforming tabular data into [Resource Description Framework (RDF)](https://www.w3.org/RDF/). It is part of OTTR which is:

>Reasonable Ontology Templates (OTTR) is a language with supporting tools for representing and instantiating RDF graph and OWL ontology modelling patterns. It is designed to improve the efficiency and quality of building, using, and maintaining knowledge bases.

To understand why, read [the presentation by OTTR creators](https://www.uio.no/studier/emner/matnat/ifi/IN3060/v19/undervisningsmateriale/ottr-part1.pdf) from the University of Oslo.

## Usage

At the moment the project is in early stages of development, so you cannot use it just yet. 
However, the idea is that you will be able to run it either as a script or a library from inside your project. 
It will not do everything the reference implementation - [Lutra](https://gitlab.com/ottr/lutra/lutra) - does. The focus is on translating CSV and [CSVW](https://csvw.org/standards.html) files, or data available as python objects, arrays or dictionaries. 

Currently, the work is focused on `stOTTR` implementation. The `tabOTTR` is likely the next step followed by potentially a new OTTR flavour to deal with CSVW. 

If you cannot wait, you can always help to get it done. It's an open-source project after all!

## Contributing

Starts and pull requests are welcomed as are any ideas and comments. 
To test the project after cloning do `pytest`. After making any changes do `make style` to run _isort_, _flake8_ and _black_ on code which is not autogenerated. 

If the ANTLR grammar has to be updated (due to changes to the specification) you will have to
* Download a new grammar file and save it as `antlr/stOTTR.g4`.
* Enusre there is `turtleDoc : directive*;` line as a first rule in `Turtle.g4`.
* To build the grammar lexers and parsers in `pyottr/grammar` by invoking `make grammar`.

## Resources

* To learn about ANTLR, see [the mega tutorial](https://tomassetti.me/antlr-mega-tutorial) by Gabriele Tomassetti.
* [Lutra stOTTR parser tests](https://github.com/rtto/lutra-mirror/blob/develop/lutra-stottr/src/test/java/xyz/ottr/lutra/stottr/parser/ParserTest.java) have example of usage and what needs to be covered. 
* [Lutra model](https://github.com/rtto/lutra-mirror/tree/develop/lutra-core/src/main/java/xyz/ottr/lutra/model). 